import{b as y}from"./chunk-HP2OTZ4C.js";import{b as m,c as F,d as S,e as H,f as j,g as h,i as R,j as x,m as J,n as N,r as w,x as _}from"./chunk-NRSQ2VE4.js";import"./chunk-EGHBM24H.js";import{A as U,Bb as b,C as k,Fa as g,Ga as B,I as u,N as c,Nb as O,O as d,Pb as C,Qa as p,Sa as P,Tb as Z,Ya as v,ea as i,fa as s,o as D,qa as E,r as G,sa as n,tb as $,ub as z,w as q,wa as a,x as V,xa as l,y as L,ya as f}from"./chunk-IOLIYBRE.js";var A=class t{constructor(r,e,o){this.accountService=r;this.router=e;this.activatedRoute=o;this.returnUrl=this.activatedRoute.snapshot.queryParams.returnUrl||"/shop"}loginForm=new H({email:new j("",[m.required,m.email]),password:new j("",m.required)});returnUrl;onSubmit(){this.accountService.login(this.loginForm.getRawValue()).subscribe({next:()=>this.router.navigateByUrl(this.returnUrl)})}static \u0275fac=function(e){return new(e||t)(s(y),s(C),s(O))};static \u0275cmp=c({type:t,selectors:[["app-login"]],standalone:!0,features:[v],decls:11,vars:7,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return o.onSubmit()}),a(3,"div",3)(4,"h1",4),p(5,"Login"),l()(),f(6,"app-text-input",5)(7,"app-text-input",6),a(8,"div",7)(9,"button",8),p(10," Sign in "),l()()()()()),e&2&&(i(2),n("formGroup",o.loginForm),i(4),n("formControl",o.loginForm.controls.email)("label","Email Address"),i(),n("formControl",o.loginForm.controls.password)("label","Password")("type","password"),i(2),n("disabled",o.loginForm.invalid))},dependencies:[_,w,N,h,F,S,R,x]})};var K="(?=^.{6,10}$)(?=.*d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&amp;*()_+}{&quot;:;'?/&gt;.&lt;,])(?!.*s).*$";function oe(t,r){if(t&1&&(a(0,"li"),p(1),l()),t&2){let e=r.$implicit;i(),P(" ",e," ")}}function ie(t,r){if(t&1&&(a(0,"ul",10),E(1,oe,2,1,"li",11),l()),t&2){let e=B();i(),n("ngForOf",e.errors)}}var M=class t{constructor(r,e,o){this.fb=r;this.accountService=e;this.router=o;this.initForm()}errors=null;registerForm;initForm(){this.registerForm=this.fb.group({displayName:["",m.required],email:["",[m.required,m.email],[this.validateEmailNotTaken()]],password:["",[m.required,m.pattern(K)]]})}validateEmailNotTaken(){return r=>r.valueChanges.pipe(V(1e3),L(1),k(()=>this.accountService.checkEmailExists(r.value).pipe(G(e=>e?{emailExists:!0}:null),U(()=>r.markAsTouched()),q(e=>D(e.message?{errorMessage:!0}:null)))))}onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>this.router.navigateByUrl("/shop"),error:r=>this.errors=r.errors})}static \u0275fac=function(e){return new(e||t)(s(J),s(y),s(C))};static \u0275cmp=c({type:t,selectors:[["app-register"]],standalone:!0,features:[v],decls:13,vars:10,consts:[[1,"d-flex","justify-content-center","mt-5"],[1,"col-3"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-4"],[1,"mb-3"],[3,"formControl","label"],[3,"formControl","label","type"],["class","text-danger list-unstyled",4,"ngIf"],[1,"d-grid"],["type","submit",1,"btn","btn-lg","btn-primary","mt-3",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return o.onSubmit()}),a(3,"div",3)(4,"h1",4),p(5,"Sign up"),l()(),f(6,"app-text-input",5)(7,"app-text-input",5)(8,"app-text-input",6),E(9,ie,2,1,"ul",7),a(10,"div",8)(11,"button",9),p(12," Sign up "),l()()()()()),e&2&&(i(2),n("formGroup",o.registerForm),i(4),n("formControl",o.registerForm.controls.displayName)("label","Display Name"),i(),n("formControl",o.registerForm.controls.email)("label","Email Address"),i(),n("formControl",o.registerForm.controls.password)("label","Password")("type","password"),i(),n("ngIf",o.errors),i(2),n("disabled",o.registerForm.invalid))},dependencies:[z,$,_,w,N,h,F,S,R,x]})};var ne=[{path:"login",component:A},{path:"register",component:M}],I=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=d({type:t});static \u0275inj=u({imports:[b,Z.forChild(ne)]})};var Q=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=d({type:t});static \u0275inj=u({imports:[b,I]})};export{Q as AccountModule};
